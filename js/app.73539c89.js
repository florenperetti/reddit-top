(function(t){function e(e){for(var s,a,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(s=!1)}s&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var s={},r={app:0},o=[];function a(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=s,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vue-drawer-layout",{ref:"drawer",class:{"drawer-layout--open":t.isDrawerOpen},attrs:{id:"app","drawer-width":350,backdrop:!1},on:{"slide-start":t.handleSlideStart,"slide-end":t.handleSlideEnd}},[n("aside",{staticClass:"drawer-content",attrs:{slot:"drawer"},slot:"drawer"},[n("Drawer",{attrs:{preventPostClick:t.preventPostClick}})],1),n("main",{staticClass:"main-content",attrs:{slot:"content"},slot:"content"},[n("MainPost")],1)])},o=[],a=n("5530"),i=n("2f62"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drawer"},[n("div",{staticClass:"drawer__header"},[t._v("Top posts")]),n("InifiniteScroll",{ref:"scroller",staticClass:"drawer__scroller",on:{"scroll-end":t.handleScrollEnd}},[n("transition-group",{staticClass:"drawer__scroller-inner",attrs:{name:"list",tag:"div"}},t._l(t.posts,(function(e){return n("Post",{key:e.name,staticClass:"list-item",attrs:{post:e},on:{"dismiss-post":t.handleDismissPost,"view-post":t.handleViewPost}})})),1)],1),n("div",{staticClass:"drawer__footer"},[n("button",{staticClass:"drawer__dismiss-button",on:{click:t.handleDismissAllPosts}},[t._v("Dismiss All")])])],1)},l=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"post",on:{click:function(e){return t.$emit("view-post",t.post)}}},[n("div",{staticClass:"post__content-wrapper"},[n("div",{staticClass:"post__header"},[n("span",{class:["post__icon-read",{"post__icon-read--unread":t.post.read}]}),n("h2",{staticClass:"post__author"},[t._v(t._s(t.post.author))]),n("span",{staticClass:"post__date"},[t._v(t._s(t.postDate))])]),n("div",{staticClass:"post__content"},[t.post.thumbnail?n("img",{staticClass:"post__thumbnail",attrs:{src:t.post.thumbnail}}):t._e(),n("h3",{staticClass:"post__title"},[t._v(t._s(t.post.title))])]),n("div",{staticClass:"post__footer"},[n("button",{staticClass:"post__dismiss-button",on:{click:function(e){return t.$emit("dismiss-post",t.post.name)}}},[n("span",{staticClass:"post__icon-dismiss"},[t._v("×")]),t._v(" Dismiss Post")]),n("span",{staticClass:"post__comments"},[t._v(t._s(t.post.num_comments)+" comments")])])]),t._m(0)])},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"post__icon-chevron"},[t._v("›")])])}],p=function(t){var e=Math.round((+new Date-new Date(1e3*t))/1e3),n=60,s=60*n,r=24*s;return e<30?"just now":e<n?e+" seconds ago":e<2*n?"a minute ago":e<s?Math.floor(e/n)+" minutes ago":1===Math.floor(e/s)?"1 hour ago":e<r?Math.floor(e/s)+" hours ago":e<2*r?"yesterday":e<7*r?Math.floor(e/r)+"days ago":"more than a week ago"},f=function(t,e,n){var s;return function(){var r=this,o=arguments,a=function(){s=null,n||t.apply(r,o)},i=n&&!s;clearTimeout(s),s=setTimeout(a,e),i&&t.apply(r,o)}},h={name:"Post",props:{post:{type:Object,required:!0}},computed:{postDate:function(){return p(this.post.created_utc)}}},m=h,_=(n("bef4"),n("2877")),v=Object(_["a"])(m,u,d,!1,null,null,null),P=v.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{"&scroll":function(e){return t.debouncedScrollHandler(e)}}},[t._t("default")],2)},S=[],w=(n("b65f"),n("96cf"),n("1da1")),O={name:"InfiniteScroll",created:function(){this.debouncedScrollHandler=f(this.scrollHandler,200)},methods:{scrollHandler:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isAtBottom()&&t.$emit("scroll-end");case 1:case"end":return e.stop()}}),e)})))()},isAtBottom:function(){var t=this.$el.getBoundingClientRect(),e=t.height,n=this.$el,s=n.scrollHeight,r=n.scrollTop,o=Math.trunc(s-r),a=Math.ceil(e),i=5,c=o<a+i&&o>a-i;return c}}},g=O,T=Object(_["a"])(g,b,S,!1,null,null,null),C=T.exports,j={name:"Drawer",components:{Post:P,InifiniteScroll:C},props:{preventPostClick:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(i["c"])({posts:"posts/getPostsToShow"})),{},{postCount:function(){return this.posts.length}}),methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])({dismissPost:"posts/dismissPost",dismissAllPosts:"posts/dismissAllPosts",fetchPosts:"posts/fetchPosts",viewPost:"posts/viewPost"})),{},{handleDismissAllPosts:function(){this.$refs.scroller.$el.scrollTop=0,this.dismissAllPosts(),this.handleScrollEnd()},handleDismissPost:function(t){this.preventPostClick||(this.dismissPost(t),0===this.postCount&&this.handleScrollEnd())},handleViewPost:function(t){this.preventPostClick||this.viewPost(t)},handleScrollEnd:function(){this.fetchPosts(!0)}})},E=j,y=(n("e27a"),Object(_["a"])(E,c,l,!1,null,"2e45c1f0",null)),D=y.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currentPost?n("div",{attrs:{id:"main"}},[n("h1",[t._v(t._s(t.currentPost.author))]),t.currentPost.thumbnail?n("img",{attrs:{src:t.currentPost.thumbnail},on:{click:t.handleImageClick}}):t._e(),n("h3",[t._v(t._s(t.currentPost.title))])]):n("div",[t._v("Swipe to open the menu!")])},A=[],R={name:"MainPost",props:{post:{type:Object}},computed:Object(a["a"])({},Object(i["d"])({currentPost:function(t){return t.posts.current}})),methods:{handleImageClick:function(){this.currentPost.image&&window.open(this.currentPost.image)}}},M=R,x=(n("f4e6"),Object(_["a"])(M,k,A,!1,null,"5640bee4",null)),$=x.exports,I={name:"App",components:{Drawer:D,MainPost:$},data:function(){return{isDrawerOpen:!1,preventPostClick:!1}},created:function(){this.fetchPosts()},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])({fetchPosts:"posts/fetchPosts"})),{},{handleSlideStart:function(t){this.preventPostClick=!0},handleSlideEnd:function(t){this.isDrawerOpen=t,this.preventPostClick=!1}})},L=I,N=(n("5c0b"),Object(_["a"])(L,r,o,!1,null,null,null)),H=N.exports,B=n("15fd"),U=(n("99af"),n("13d5"),n("b0c0"),n("ac1f"),n("5319"),n("2909")),F=n("bc3a"),J=n.n(F),V=function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(){var e,n,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:{limit:10},t.prev=1,t.next=4,J.a.get("https://www.reddit.com/r/funny/top/.json",{params:e});case 4:return n=t.sent,t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t["catch"](1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),q=/&amp;/g,z={after:null,current:null,all:[],watched:{},dismissed:{}},G={getPostsToShow:function(t,e,n){return t.all.reduce((function(e,n){return t.dismissed[n.name]||(n.read=!!t.watched[n.name],e.push(n)),e}),[])},getPostsToShowCount:function(t,e){return e.getPostsToShow.length}},K={fetchPosts:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function n(){var s,r,o,a,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.commit,r=t.state,o=t.dispatch,n.prev=1,e&&(a={after:r.after,limit:10}),n.next=5,V(a);case 5:i=n.sent,c=i.data.children.reduce((function(t,e){var n=e.data,s=n.title,o=n.thumbnail,a=n.author,i=n.name,c=n.num_comments,l=n.created_utc,u=n.preview;if(r.dismissed[i])return t;var d="";return u&&u.images&&u.images[0]&&(d=u.images[0].source.url.replace(q,"&")),t.push({title:s,thumbnail:o,image:d,author:a,name:i,num_comments:c,created_utc:l,read:!1}),t}),[]),s(e?"APPEND_POSTS":"SET_ALL_POSTS",c),c.length>0?s("SET_AFTER",c[c.length-1].name):o("fetchPosts",!0),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](1),console.error(n.t0);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()},dismissPost:function(t,e){var n=t.commit,s=t.state;s.current&&s.current.name===e&&n("SET_CURRENT_POST",null),n("SET_DISSMISSED_POST",e)},dismissAllPosts:function(t){var e=t.commit;e("SET_CURRENT_POST",null),e("DISSMISS_ALL_POSTS")},viewPost:function(t,e){var n=t.commit;n("SET_CURRENT_POST",e),n("SET_READ_POST",e.name)}},Q={SET_ALL_POSTS:function(t,e){t.all=e},APPEND_POSTS:function(t,e){t.all=[].concat(Object(U["a"])(t.all),Object(U["a"])(e))},SET_DISSMISSED_POST:function(t,e){s["a"].set(t.dismissed,e,!0)},DISSMISS_ALL_POSTS:function(t){t.dismissed=Object(a["a"])(Object(a["a"])({},t.dismissed),t.all.reduce((function(t,e){return t[e.name]=!0,t}),{}))},SET_CURRENT_POST:function(t,e){t.current=e},SET_READ_POST:function(t,e){s["a"].set(t.watched,e,!0)},SET_AFTER:function(t,e){t.after=e}},W={namespaced:!0,state:z,getters:G,actions:K,mutations:Q},X=n("0e44");s["a"].use(i["a"]);var Y=new i["a"].Store({modules:{posts:W},plugins:[Object(X["a"])({reducer:function(t){var e=t.posts,n=(e.current,Object(B["a"])(e,["current"]));return{posts:n}}})]}),Z=n("f77e"),tt=n.n(Z);s["a"].config.productionTip=!1,s["a"].use(tt.a),new s["a"]({store:Y,render:function(t){return t(H)}}).$mount("#app")},"5b63":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var s=n("9c0c"),r=n.n(s);r.a},"5fe4":function(t,e,n){},"65e9":function(t,e,n){},"9c0c":function(t,e,n){},bef4:function(t,e,n){"use strict";var s=n("5b63"),r=n.n(s);r.a},e27a:function(t,e,n){"use strict";var s=n("5fe4"),r=n.n(s);r.a},f4e6:function(t,e,n){"use strict";var s=n("65e9"),r=n.n(s);r.a}});
//# sourceMappingURL=app.73539c89.js.map